function guardarListas() {
  localStorage.setItem("honoshop_listas", JSON.stringify(listas));
}

function guardarListaActual() {
  localStorage.setItem("honoshop_lista_actual", currentList);
}

document.getElementById("btnNuevaLista").onclick = () => {
  const nombre = prompt("Nombre de la nueva lista:");
  if (!nombre) return;

  const clean = nombre.trim();
  if (!clean) return;

  if (listas.includes(clean)) {
    alert("Ya existe una lista con ese nombre.");
    return;
  }

  listas.push(clean);
  currentList = clean;

  guardarListas();
  guardarListaActual();
  cargarListas();
  cargarListaDesdeServidor();
};

document.getElementById("btnEditarLista").onclick = () => {
  if (currentList === "General") {
    alert("La lista General no se puede renombrar.");
    return;
  }

  const nuevo = prompt("Nuevo nombre de la lista:", currentList);
  if (!nuevo) return;

  const clean = nuevo.trim();
  if (!clean) return;

  if (listas.includes(clean)) {
    alert("Ya existe una lista con ese nombre.");
    return;
  }

  const index = listas.indexOf(currentList);
  if (index === -1) return;

  listas[index] = clean;
  currentList = clean;

  guardarListas();
  guardarListaActual();
  cargarListas();
  cargarListaDesdeServidor();
};

document.getElementById("btnEliminarLista").onclick = () => {
  if (currentList === "General") {
    alert("La lista General no se puede eliminar.");
    return;
  }

  if (!confirm(`Â¿Eliminar la lista "${currentList}"?`)) return;

  listas = listas.filter(l => l !== currentList);
  currentList = "General";

  guardarListas();
  guardarListaActual();
  cargarListas();
  cargarListaDesdeServidor();
};




























































































































